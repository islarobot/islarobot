<!DOCTYPE html>
<html lang="en">
    <head>
        <title>list_ports</title>
        <script type="text/javascript" src="/socket.io/socket.io.js"></script> 
        <script type="text/javascript" src="assets/classes.js"></script>
        <script type="text/javascript" src="assets/functions_ports.js"></script>
        <!--The above library(/socket.io/socket.io.js) will be generated by socket.io module of server -->
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script> 
    </head>
    <body onload="function_load()">
        <form>
             
            
            <input id="submit_puertos" type="button" value="Request device list">
            <div id="content"></div> <!--This is where the data from the server is added-->
            <label id="content1"></label>
 
        </form>
 
        <script type="text/javascript">
            var socket = io.connect("/"); 
            /*Initializing the connection with the server via websockets */
            
				//recibo mensajes del servidor!!!            
            socket.on("message",function(message){  
               
                console.log("Message from the server arrived")
                message1 = JSON.parse(message);
                //console.log(message1); /*converting the data into JS object */
                //$('#content').append('<div >'+message+'</div>'); /*appending the data on the page using Jquery */
                document.getElementById('content1').innerHTML = message;
                

            });
            
            //recibo lista de usb
				socket.on("usb_list",function(message){  
               
					//console.log(message);					
					
                //message = JSON.parse(message)
                
					
                
                //no hay puertos
                if (message.length_portlist == '0') {

						//print_no_ports_message();                	
                	
                }
						//un puerto                
                else if (message.length_portlist == '1') {
                	

						//print_one_port_connect(message.value);                	
                	
                }
						//n puertos                
                else{
                

							//print_list_of_ports(message.value_ports);                
                }
                
                //console.log(message); /*converting the data into JS object */
                    
					      
					

                
            });            
            
           	socket.on("state",function(message){ 
           	
				message = JSON.parse(message)
           	

           	
                $('#content').append('<div >'+message+'</div>'); /*appending the data on the page using Jquery */
                
                show_hide_button(message);
           	
           	});
            
            //$(function(){$('#submit_puertos').click(function(){ socket.emit('request_usb','');}); });
 
  
        </script>
    </body>
</html>
